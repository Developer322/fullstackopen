(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var r=n(15),o=n(4),a=n(2),c=n(0),u=n.n(c),i=n(14),l=n.n(i),f=function(e){var t=e.onPersonAdded,n=e.onNameChanged,r=e.onNumberChanged,o=e.name,a=e.number;return u.a.createElement("form",null,u.a.createElement("div",null,"name: ",u.a.createElement("input",{onChange:n,value:o})),u.a.createElement("div",null,"number: ",u.a.createElement("input",{onChange:r,value:a})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit",onClick:t},"add")))},d=function(e){var t=e.name,n=e.number,r=e.onDelete;return u.a.createElement("div",null,"".concat(t," ").concat(n)," ",u.a.createElement("button",{onClick:r},"delete"))},m=function(e){var t=e.persons,n=e.filter,r=e.deleteHandler;return u.a.createElement("div",null,(t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))||[]).map((function(e){return u.a.createElement(d,Object.assign({},e,{key:e.name,onDelete:r(e.id,e.name)}))})))},s=function(e){var t=e.onFilterChanged,n=e.filter;return u.a.createElement("form",null,"filter shown with",u.a.createElement("input",{onChange:t,value:n}))},b={info:{border:"3px solid green",color:"green",padding:3,maxWidth:300,backgroundColor:"#ccc"},error:{border:"3px solid red",color:"red",padding:3,maxWidth:300,backgroundColor:"#ccc"}},p=function(e){var t=e.message,n=e.status;return null===t?null:u.a.createElement("div",{style:"error"==n?b.error:b.info},t)},h=n(3),O=n.n(h);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g="/api/persons",v=function(e,t){return O.a.put("".concat(g,"/").concat(e.id),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)).then((function(e){return e.data})).catch((function(n){throw t("Information of ".concat(e.name," has already been removed from server"),"error"),n}))};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}l.a.render(u.a.createElement((function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(""),l=Object(a.a)(i,2),d=l[0],b=l[1],h=Object(c.useState)(""),j=Object(a.a)(h,2),E=j[0],y=j[1],P=Object(c.useState)([]),C=Object(a.a)(P,2),k=C[0],D=C[1],S=Object(c.useState)(null),x=Object(a.a)(S,2),N=x[0],A=x[1],F=Object(c.useState)("info"),H=Object(a.a)(F,2),I=H[0],J=H[1];Object(c.useEffect)((function(){return(e=L,O.a.get(g).then((function(e){return e.data})).catch((function(t){throw e("Error: ".concat(t),"error"),t}))).then((function(e){return D(e)}));var e}),[]);var L=function(e,t){A(e),I!=t&&J(t),setTimeout((function(){return A(null)}),3e3)};return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(s,{onFilterChanged:function(e){return y(e.target.value)},filter:E}),u.a.createElement(p,{message:N,status:I}),u.a.createElement("h3",null,"Add a new"),u.a.createElement(f,{onPersonAdded:function(e){e.preventDefault();var t=k.find((function(e){return e.name==n}));if(t){if(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))){var o=w({},t,{number:d});v(o,L).then((function(e){L("Changed ".concat(e.name)),D(k.map((function(t){return t.id==e.id?e:t})))}))}}else(function(e,t){return O.a.post(g,e).then((function(e){return e.data})).catch((function(e){throw t("Error: ".concat(e),"error"),e}))})({name:n,number:d},L).then((function(e){L("Added ".concat(e.name)),D([].concat(Object(r.a)(k),[w({},e)]))}))},onNameChanged:function(e){return o(e.target.value)},onNumberChanged:function(e){return b(e.target.value)},name:n,number:d}),u.a.createElement("h3",null,"Numbers"),u.a.createElement(m,{persons:k,filter:E,deleteHandler:function(e,t){return function(n){return window.confirm("Delete ".concat(t,"?"))&&function(e,t){return O.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data})).catch((function(e){throw t("Error: ".concat(e),"error"),e}))}(e,L).then((function(n){L("Deleted ".concat(t)),D(k.filter((function(t){return t.id!=e})))}))}}}))}),null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.80b54cc1.chunk.js.map